# Harbor Container Updater - Environment Variables Configuration
# Copy this file to .env and customize for your environment

# ===== CORE CONFIGURATION =====
HARBOR_MODE=homelab                     # homelab, development, staging, production
HARBOR_SECRET_KEY=                      # Generate with: openssl rand -base64 32
HARBOR_TIMEZONE=UTC                     # System timezone (auto-detected if not set)

# ===== DATABASE CONFIGURATION =====
DATABASE_URL=sqlite:///data/harbor.db   # SQLite for home lab (default)
# DATABASE_URL=postgresql://user:pass@localhost:5432/harbor  # pragma: allowlist secret

# ===== DOCKER CONFIGURATION =====
DOCKER_HOST=unix:///var/run/docker.sock # Direct socket access (home lab default)
# DOCKER_HOST=tcp://docker-socket-proxy:2375  # Socket proxy (secure deployment)
DOCKER_TIMEOUT=60                       # Docker API timeout in seconds
DOCKER_TLS_VERIFY=false                 # Enable for remote Docker hosts

# ===== SECURITY CONFIGURATION =====
REQUIRE_HTTPS=false                     # Set to true for production
SESSION_TIMEOUT_HOURS=168               # 7 days for home lab, 8 hours for production
API_RATE_LIMIT_PER_HOUR=1000           # API rate limiting
CORS_ORIGINS=http://localhost:8080      # Allowed CORS origins

# ===== LOGGING CONFIGURATION =====
LOG_LEVEL=INFO                          # TRACE, DEBUG, INFO, WARN, ERROR, CRITICAL
LOG_FORMAT=text                         # text (home lab), json (production)
LOG_RETENTION_DAYS=14                   # How long to keep log files
LOG_MAX_SIZE_MB=100                     # Maximum log file size

# ===== UPDATE CONFIGURATION =====
DEFAULT_CHECK_INTERVAL_SECONDS=86400    # Daily checks (24 hours)
DEFAULT_UPDATE_TIME=03:00               # Default update time (3 AM)
MAX_CONCURRENT_UPDATES=2                # Conservative for home lab
UPDATE_TIMEOUT_SECONDS=600              # 10 minutes per update

# ===== REGISTRY CONFIGURATION =====
REGISTRY_CACHE_TTL=3600                 # Registry response cache (1 hour)
REGISTRY_TIMEOUT=30                     # Registry API timeout
REGISTRY_RETRY_COUNT=3                  # Number of retries for failed requests
REGISTRY_USER_AGENT=Harbor/0.1.0        # User agent for registry requests

# ===== FEATURE FLAGS =====
ENABLE_AUTO_DISCOVERY=true              # Automatically discover containers
ENABLE_METRICS=true                     # Prometheus metrics endpoint
ENABLE_HEALTH_CHECKS=true               # Health check endpoints
ENABLE_GETTING_STARTED=true             # Show first-run setup wizard
ENABLE_SIMPLE_MODE=true                 # Hide advanced features initially

# Future features (behind feature flags - set to false for v1.0)
ENABLE_MFA=false                        # TODO: M7+ Multi-factor authentication
ENABLE_RBAC=false                       # TODO: M8+ Role-based access control
ENABLE_KUBERNETES=false                 # TODO: M9+ Kubernetes runtime support
ENABLE_POSTGRESQL=false                 # TODO: M7+ PostgreSQL database support

# ===== CLEANUP CONFIGURATION =====
ENABLE_AUTO_CLEANUP=true                # Automatically clean up old images
DEFAULT_CLEANUP_KEEP_IMAGES=2           # Number of old images to keep
CLEANUP_DELAY_HOURS=24                  # Wait before cleaning up images

# ===== BACKUP CONFIGURATION (Home Lab) =====
ENABLE_AUTO_BACKUP=true                 # Automatic database backups
BACKUP_RETENTION_COUNT=7                # Number of backups to keep
BACKUP_SCHEDULE=0 2 * * *               # Cron schedule: daily at 2 AM

# ===== PERFORMANCE TUNING =====
HARBOR_MAX_WORKERS=auto                 # auto, or specific number for uvicorn
DATABASE_POOL_SIZE=5                    # Connection pool size (5 for home lab)
DATABASE_MAX_OVERFLOW=2                 # Pool overflow connections
REGISTRY_CONNECTION_POOL_SIZE=10        # HTTP connection pool for registries

# ===== DEVELOPMENT SETTINGS =====
# Only used when HARBOR_MODE=development
DEV_RELOAD=true                         # Auto-reload on code changes
DEV_DEBUG_TOOLBAR=false                 # Enable debug toolbar (future)
DEV_MOCK_DOCKER=false                  # Use mock Docker client for testing

# ===== NOTIFICATION SETTINGS (Future) =====
# These will be implemented in later milestones
ENABLE_NOTIFICATIONS=false              # TODO: M7+ Notification system
WEBHOOK_TIMEOUT=30                      # Webhook timeout in seconds
EMAIL_SMTP_HOST=                        # TODO: M7+ Email notifications
SLACK_WEBHOOK_URL=                      # TODO: M7+ Slack integration

# ===== MONITORING AND METRICS =====
METRICS_ENABLED=true                    # Enable Prometheus metrics
METRICS_PATH=/metrics                   # Metrics endpoint path
HEALTH_CHECK_INTERVAL=30                # Health check interval in seconds

# ===== EXTERNAL SERVICES =====
# Redis (enterprise/production deployments)
REDIS_URL=redis://localhost:6379/0     # Redis for caching and sessions
REDIS_PASSWORD=                         # Redis password if required

# External monitoring (production)
SENTRY_DSN=
